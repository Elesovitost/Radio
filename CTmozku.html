<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>CTmozku</title>
  <style>
  .hidden-by-ctmozku { display: none !important; }
  </style>
</head>
<body>
<script>
  // Naƒçten√≠ p≈Øvodn√≠ho MRmozku.html
  fetch('MRmozku.html')
    .then(r => r.text())
    .then(html => {

      // --- TEXTOV√â √öPRAVY ---
      html = html.replace(/MR MOZKU/g, 'CT MOZKU');




      // --- ODSTRANƒöN√ç P≈ÆVODN√çHO SCRIPTU FDGPETpopis.js ---
      html = html.replace(/<script[^>]*src=["']MRmozkupopis\.js["'][^>]*><\/script>/i, '');
	  html = html.replace(/\bFLAIR\b/g, 'denzita');
	  html = html.replace(/T1\s*C\+\s*/gi, 'sycen√≠ ');
	  html = html.replace(/sign√°l\.\.\./gi, 'denzita...');
	  
	  html = html.replace(/FLAIR\+/gi, 'hyperdenzn√≠ ');
	  html = html.replace(/FLAIRizo/gi, 'izodenzn√≠ ');
	  html = html.replace(/FLAIR-/gi, 'hypodenzn√≠ ');



// --- DOPLNƒöN√ç CSS ---
      html = html.replace(
        /<\/head>/i,
        `<style>
          #PETselect { display:none !important; }
		  
		  [id*="BrainLesion0Signal"],
		  [id*="BrainLesion2Signal"],
		  [id*="BrainLesion3Signal"] { display:none !important; }
		  
		  [id*="BrainLesion1Activity"],
		  [id*="BrainLesion2Activity"],
		  [id*="BrainLesion3Activity"] { display:none !important; }

		  #BrainLesion1selectSignal #trT1,#trT2, #trDWI, #trSWI  { display:none !important; }
		  

        </style></head>`
      );

      // --- VLO≈ΩEN√ç UPRAVEN√âHO HTML ---
      document.open();
      document.write(html);
      document.close();

// --- DODATEƒåN√â SKR√ùV√ÅN√ç ---


// --- DYNAMICK√â NAƒåTEN√ç A √öPRAVA FDGPETpopis.js ---
      fetch('MRmozkupopis.js')
        .then(r => r.text())
        .then(js => {
          js = js.replace(/PETCT/g, 'CTWB');  // p≈ôepi≈° v≈°echny v√Ωskyty

// --- WML ---
js = js.replace(/T2W\+\s*FLAIR\+\s*l√©ze/g, 'hypodenzity');
js = js.replace(/s dob≈ôe ohraniƒçen√Ωm lo≈æiskem\s*T2W\+\s*FLAIR\+/gi, 's hypodenzn√≠m lo≈æiskem');
js = js.replace(/gliov√© l√©ze/g, 'l√©ze');
js = js.replace(/l√©ze v b√≠l√© hmotƒõ/g, 'hypodenzity v b√≠l√© hmotƒõ');
js = js.replace(/Bez zv√Ω≈°en√© restrikce difuze/g, '');

js = js.replace(/FLAIR\+/gi, 'nativnƒõ hyperdenzn√≠ ');
js = js.replace(/FLAIRizo/gi, 'nativnƒõ izodenzn√≠ ');
js = js.replace(/FLAIR-/gi, 'nativnƒõ hypodenzn√≠ ');

js = js.replace(/T1C\+\+/gi, 'C++');
js = js.replace(/T1C\+/gi, 'C+');
js = js.replace(/T1C0/gi, 'C0');
		  
js = js.replace(/MR mozku/g, 'CT mozku');

js = js.replace(/Bez l√©z√≠ v b√≠l√© hmotƒõ./g, '');
js = js.replace(/Struktury v MMK a vnit≈ôn√≠ch zvukovodech bez patrn√© patologie./g, 'Bez p≈ôesunu st≈ôedn√≠ ƒç√°ry.');



// HODNOCEN√ç


//Do z√°vƒõru



// üîπ Okam≈æitƒõ zobraz texty1 po naƒçten√≠ CTWB
setTimeout(() => {
  try {
    if (window.parent && window.parent.updateFinalTextAreas) {
      window.parent.updateFinalTextAreas();
      window.parent.checkAndUpdateDivVisibility();
      console.log("‚úÖ Texty1 zobrazeny automaticky po naƒçten√≠ CTWB");
    }
  } catch (e) {
    console.warn("‚ö†Ô∏è Nelze zobrazit texty1 automaticky:", e);
  }
}, 100);




          const script = document.createElement('script');
          script.textContent = js;
          document.body.appendChild(script);

          console.log("MRmozkupopis.js naƒçten a p≈ôeps√°n");
        })
        .catch(err => console.error("Chyba p≈ôi naƒç√≠t√°n√≠ MRmozkupopis.js:", err));
    })
    .catch(err => {
      document.body.innerHTML = "<p style='color:red'>Chyba p≈ôi naƒç√≠t√°n√≠ FDGPET.html</p>";
      console.error(err);
    });
</script>
</body>
</html>
